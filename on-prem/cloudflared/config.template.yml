# Cloudflare Tunnel Configuration Template
# =============================================================================
#
# IMPORTANT: Routes are now managed in Cloudflare Dashboard, not in this file!
#
# This file is only used for local tunnel configuration. The actual routing
# is configured in the Cloudflare Zero Trust Dashboard under:
#   Networks → Tunnels → [tunnel-name] → Public Hostname
#
# For full setup instructions, see:
#   on-prem/docs/CLOUDFLARE_TUNNEL_SETUP.md
#
# Quick Setup:
#   1. Run: ./on-prem/scripts/setup-cloudflare-tunnel.sh --client-name CLIENT --domain client.com
#   2. Configure routes in Cloudflare Dashboard (see below)
#   3. Verify: curl https://sign.client.com/
#
# =============================================================================

tunnel: <TUNNEL_ID>
credentials-file: /etc/cloudflared/<TUNNEL_ID>.json

# =============================================================================
# CLOUDFLARE DASHBOARD ROUTES
# =============================================================================
#
# Configure these routes in Cloudflare Zero Trust Dashboard.
# ORDER MATTERS - specific paths must come BEFORE the catch-all!
#
# | #  | Path              | Service                          | Description              |
# |----|-------------------|----------------------------------|--------------------------|
# | 1  | orchestrator/*    | http://localhost:4010            | Orchestrator API         |
# | 2  | api/signing/*     | http://localhost:4010            | Signing API              |
# | 3  | MTSAPilot/*       | http://localhost:8080            | MTSA Pilot SOAP          |
# | 4  | MTSA/*            | http://localhost:8080            | MTSA Prod SOAP           |
# | 5  | *                 | http://localhost:3001            | DocuSeal (catch-all)     |
#
# Note: Health check at /orchestrator/health works via the orchestrator/* route
#       (the orchestrator has /orchestrator/health mounted internally)
#
# =============================================================================

# Minimal ingress config - actual routing handled by Cloudflare Dashboard
ingress:
  - service: http_status:404
